<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>WhitePack — Online Catalogue (v6.1)</title>
<style>
:root { --bg:#f5fff8; --accent:#3b7a3a; --accent2:#6ecf6e; --muted:#4b6b4b; --card:#fff; }
*{box-sizing:border-box}
body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:var(--bg);color:#213;line-height:1.35}
header{background:linear-gradient(90deg,#a6e8a6,#4ea84e);padding:14px 16px;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.logo{width:56px;height:44px;border-radius:8px;background:#3b7a3a;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:14px}
h1{margin:0;font-size:20px;color:#1f401d}
.topbar{margin-left:auto;display:flex;flex-direction:column;gap:4px;align-items:flex-end;font-size:13px;color:#133a12}
.topbar a{color:#133a12;text-decoration:none;font-weight:600}
.top-actions{display:flex;gap:6px;align-items:center}
.lang-btn,.cart-btn{border:none;background:#fff;color:#166534;border-radius:9999px;padding:3px 12px;font-size:12px;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:4px}
.cart-badge{background:#166534;color:#fff;border-radius:9999px;min-width:18px;text-align:center;font-size:11px;padding:0 4px}
.container{padding:16px}
.client-box{background:#fff;border:1px solid rgba(0,0,0,0.04);border-radius:10px;padding:10px 12px;margin-bottom:10px;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.client-box label{font-size:12.5px}
.client-box input{border:1px solid #e2e8f0;border-radius:8px;padding:4px 8px;font-size:13px}
.helper-text{font-size:11px;color:#475569;margin-top:-6px;display:block}
#clientDiscountBadge{background:#d1fae5;color:#065f46;padding:3px 8px;border-radius:9999px;font-size:12px;display:none}
#clientNotFound{font-size:11.5px;color:#b91c1c;display:none}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:14px}
.card{background:var(--card);border-radius:12px;padding:10px;box-shadow:0 2px 6px rgba(0,0,0,0.06);display:flex;flex-direction:column;gap:6px;min-height:270px;overflow:hidden}
.card-img{width:100%;aspect-ratio:1/1;background:#fff;border:1px solid #e2e8f0;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center}
.card-img img{width:100%;height:100%;object-fit:cover}
.card h3{margin:0;font-size:15px;color:#2f5f2d}
.card p{margin:0;color:#4f6a4b;font-size:12.5px;min-height:34px}
.price{font-weight:700;color:#2f5f2d;font-size:.85rem;margin-top:4px}
.price small{display:block;color:#557;font-weight:400;font-size:.65rem}
.out-stock{color:#b91c1c;font-size:12px;font-weight:600;margin-top:4px}
.footer{background:#d8f0d8;padding:12px;text-align:center;font-size:14px;color:#1e3a1e;margin-top:18px;border-top:1px solid rgba(0,0,0,0.03)}
@media(max-width:600px){.grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}header{flex-wrap:wrap}.client-box{flex-direction:column;align-items:flex-start}}
</style>
</head>
<body>
<header>
  <div class="logo">WP</div>
  <div>
    <h1>White Pack</h1>
    <div style="font-size:12px;color:#2b5a2b">Best Quality</div>
  </div>
  <div class="topbar">
    <div><strong>WhatsApp:</strong> <a href="https://wa.me/96181085811" target="_blank">+961 81 085 811</a></div>
    <div class="top-actions">
      <button id="langToggle" class="lang-btn">AR</button>
    </div>
  </div>
</header>

<main class="container">
  <div class="client-box">
    <div style="flex:1">
      <label id="clientNameLabel" for="clientName">Client name</label>
      <input id="clientName" placeholder="Type your name or WhatsApp number..." />
      <span id="helperText" class="helper-text">You can enter name or WhatsApp number</span>
    </div>
    <div id="clientDiscountBadge">Discount: 0%</div>
    <div id="clientNotFound">No discount for this client</div>
  </div>
  <div id="grid" class="grid"></div>
  <div class="footer"><strong>Best Quality</strong> — WhatsApp: <a href="https://wa.me/96181085811" target="_blank">+961 81 085 811</a></div>
</main>

<script>
const CLIENTS_URL = "https://yallawassel.github.io/whitepack_store/clients.json";
let clients=[];let currentLang="en";
let currentClient={name:"",discount:0,whatsapp:""};
async function loadClients(){try{const res=await fetch(CLIENTS_URL+"?t="+Date.now());clients=await res.json();}catch(e){clients=[];}}
loadClients();

const input=document.getElementById("clientName");
const helper=document.getElementById("helperText");
input.addEventListener("input",()=>{helper.style.display=input.value.trim()?"none":"block";});
input.addEventListener("change",()=>{matchClient(input.value.trim());});

function normalizePhone(num){return(num||"").replace(/\D/g,"").replace(/^0+/,"").replace(/^961/,"");}

function matchClient(name){
 if(!name){resetClient();return;}
 const clean=name.toLowerCase();
 const cleanNum=normalizePhone(name);
 const found=clients.find(c=> (c.name&&c.name.toLowerCase()===clean) ||
   (c.whatsapp&&normalizePhone(c.whatsapp).includes(cleanNum)) );
 if(found){currentClient={name:found.name,discount:Number(found.discount)||0,whatsapp:found.whatsapp||""};
  document.getElementById("clientDiscountBadge").style.display="inline-block";
  document.getElementById("clientDiscountBadge").textContent=(currentLang==="ar"?"خصم: ":"Discount: ")+currentClient.discount+"%";
  document.getElementById("clientNotFound").style.display="none";
 }else{resetClient();document.getElementById("clientNotFound").style.display="inline-block";}
}

function resetClient(){currentClient={name:"",discount:0,whatsapp:""};
 document.getElementById("clientDiscountBadge").style.display="none";
 document.getElementById("clientNotFound").style.display="none";
}

document.getElementById("langToggle").addEventListener("click",()=>{
 currentLang=currentLang==="en"?"ar":"en";
 if(currentLang==="ar"){
   document.body.dir="rtl";
   document.getElementById("langToggle").textContent="EN";
   document.getElementById("clientNameLabel").textContent="اسم العميل";
   input.placeholder="اكتب الاسم أو رقم الواتساب...";
   helper.textContent="يمكنك إدخال الاسم أو رقم الواتساب";
 }else{
   document.body.dir="ltr";
   document.getElementById("langToggle").textContent="AR";
   document.getElementById("clientNameLabel").textContent="Client name";
   input.placeholder="Type your name or WhatsApp number...";
   helper.textContent="You can enter name or WhatsApp number";
 }
});
</script>
</body>
</html>